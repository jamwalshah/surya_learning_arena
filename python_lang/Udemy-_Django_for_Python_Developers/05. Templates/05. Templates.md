# 05. Templates

## 027. Introduction

- When you've been introduced to the MVT (Model View Template) pattern that django uses, you've been told that `Template` is the component that is responsible for the UI to the end user, which is nothing but rendering the HTML to the browser
- In this section, you're going to learn how to create templates, because templates are not just HTML, but also dynamic
- These can take the data that view sends to them and these can render that dynamically to the end-user
- You'll learn how to to do that using Template tags
- We'll also learn how to use static content like images, style sheets, etc. inside your templates while working with django

## 028. Hands on Steps

- In the next few lectures, you'll see templates in action
  - You'll start by developing a very simple template which will render the text "Templates in Action from MVT !!"
  - You'll then learn how to pass your name to the web-browser to the template from the view
  - You'll then develop a little more sophisticated template, where you'll display the employee information on the UI, you'll also render a beautiful image on to that web-browser
- You're going to do all that in very simple steps
  - You'll create a project and an application
  - Create a templates directory and configure it in settings.py
  - Create a template itself, which is an HTML page with some special tags that you're going to learn
  - Create a view that'll render / use that template, and also pass map of data to the template from the web
  - We'll then configure the URLs and then see the Templates in action
  - In this process, we'll learn some super-cool tags that you can use inside the template
  - We'll also learn how to include static files like images, style sheets, etc. inside your HTML templates
- Also you'll develop a small project where you'll be displaying the various categories of products, its like a small e-Commerce project, where you'll display electronic products, toys, shoes
  - When the User clicks on one of these links, the products under those categories will be displayed

## 029. Create the Project with Template Settings

- In this lecture, we'll create a new Django project with an application inside it, and we'll set it up, so that we can use templates within that project
- To do that, go to your terminal/command-line, make sure you're under the `djangoprojects` directory, and create a new project using below command, hit enter and it'll create a new project named `templateDemo` for us

```bash
django-admin startproject templatesDemo
```

- Go into the project directory using below command

```bash
cd templatesDemo
```

- and create an app `templatesApp` here using below command

```bash
python3 manage.py startapp templatesApp
```

- The next step is to create a templates folder within our project using below command

```bash
mkdir templates
```

- `templates` folder is where all our templates will be stored, and within this folder, for each application there will be a separate folder
  - Go into `templates` folder, and create a folder `templatesApp`

  ```bash
  cd templates
  mkdir templatesApp
  ```

  - The next step is to setup this templates folder in the project, we'll do that by going to file explorer and open the `templatesDemo` project in your IDE, and open the `settings.py` of your project, and you'll see that it already includes the import for `os` and it has a base directory `BASE_DIR` which points to the project directory
    - All we need to to do is to go to directories `DIRS`, scroll down to the `TEMPLATES` list, here in templates, it has a property called `DIRS` as a list, which is where we should add our directory, as `os.path.join(BASE_DIR, 'templates')`, and `templates` is the directory name which we created earlier to store templates

    ```python
    import os
    TEMPLATES = [
        {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates')],
        'APP_DIRS': True,
        'OPTIONS': {
              'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
          },
        },
    ]
    ```

  - the `BASE_DIR` point to the project folder `templatesDemo`, which is what either of these return

  ```python
  from pathlib import Path
  BASE_DIR = Path(__file__).resolve().parent.parent
  ```

  ```python
  import os
  BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
  ```

- Now, we have configured the templates directory, so that django knows where to find the templates

## 030. Create a Template and View

- The next step is to create a Template and a View that uses the template and renders it on the browser
- To do that, goto your IDE, goto the `templates` folder in the project, goto the `templatesApp`, add a new file named `firstTemplate.html`, and then start tying your HTML

```HTML
<!DOCTYPE html>
<html>
    <head>
        <title>First Template</title>
    </head>
    <body>
        <h1>Templates in action from MVT!!</h1>
    </body>
</html>
```

- To use this template, you'll have to goto `views.py`, which will render the template
  - first step is to import `render`

  ```python
  from django.shortcuts import render
  ```

  - We'll also need the `HttpResponse` if we're using the regular views, but incase of templates, we don't need that, define a method `renderTemplate` that takes a `request` and it returns `render` method which is responsible for taking the `request` that comes in and the `template` that we provide to it, so `render` method will return an `HttpResponse`

  ```python
  def renderTemplate(request):
      return render(request=request, template_name='templateApp/firstTemplate.html')
  ```

- So, we've created a template which is HTML and then in views, we have created a view that can render the template when a request comes in for it

## 031. Configure the URL and TEST

- The last step is to configure a URL for our view and see our `templatesApp` in action
- To do that, goto your IDE, goto the `urls.py` file under your project
- You can configure application-level URLs and then include in the project-level `urls.py` file, which is up to you, but here we'll directly configure the URLs/paths inside the project-level

```python
from templatesApp import views
urlpatterns = [
    path('admin/', admin.site.urls),
    path('firstTemplate/', views.renderTemplate),
]
```

- Now, go back to the terminal/command-line, make sure, you're under the project directory, and run the below command and hit enter, it should start the server for us

```bash
python3 manage.py runserver
```

- Now, goto your web-browser, and open `localhost:8000/firstTemplate`, hit enter and you'll see it in action
- The key here is that the request goes to the Django server, and it figures out which view should render this request, and in the process it uses the template because we're passing the template to the `render()` method along with the `request`
- The `render()` method is responsible for using this `request` and using this `template` and sending the response that template gives back

## 032. Template Tags

- So far, we have developed static templates, so templates simply render static data on to the web-browser, but Django supports `Template Tags` or `DTL (Django Template Library)` that we can use to render dynamic data, i.e. whatever data the view sends to the template by fetching from the database through the models, it can be rendered on the UI using the Django template library

1. `{{ data }}` - Django Template Variables
    - So, here are the tokens to start with two flower-braces `{{` and it ends with two flower-braces `}}` as well, and within this we use variable names
    - Using these variable names we send the data from the view, the same variable name if we use within these tokens inside a template HTML file, that will be replaced with actual data
    - For Example, if the view sends a variable called `{{ firstName }}` on to the template, and within that variable we use these tokens, and that variable value will be rendered by Django at runtime
    - we can use these variable values within the HTML tags as well, and Django will replace these variables with the actual value which comes from the view

2. `{% tagName %}` - Django Template Tags
    - Another token starts with `{%` and it ends with `%}`
    - Within these we can use the template tags, special tags that are provided by the Django itself
    - For Example, `{% csrf_token %}` is a template tag provided by Django, and we'll be using this while working with Django Forms later on
    - Django will automatically replace the `{% csrf_token %}` with a unique value inside your HTML form
    - It is required for security reasons, which you'll learn later on, but the key here is that `{% csrf_token %}` is a template tag name built in into Django
    1. `{% x extends y %}`
        - Similarly, you can use `{% x extends y %}`, which is another template tag to extend one template from another
        - Template inheritance is covered later on, it helps us to reuse templates
    2. `{% if condition %} ... {% endif %}`
        - Another template tag is `{% if condition %}` , using which we can conditionally execute the HTML code, and it should end with `{% endif %}`
        - You can also use `{% for %} ... {% endfor %}` loop, but within these braces-percentages
        - You're going to learn a lot of template tags throughout the course, but remember that all these tags are coming from the `DLT (Django Template Library)` and this `{{ }}` syntax is for rendering the data, and `{% %}` syntax is used to use Template Tags provided by Django
        - These tags are processed by the **Template Engine**
        - If you goto the `settings.py`, when you configure the `TEMPLATES` list, the key-value of `BACKEND` is Template Engine which knows how to process all these tags, and `'BACKEND': 'django.template.backends.django.DjangoTemplates'` is the in-built Template Engine

        ```python
        TEMPLATES = [
            {
                'BACKEND': 'django.template.backends.django.DjangoTemplates',
                'DIRS': [os.path.join(BASE_DIR, 'templates')],
                'APP_DIRS': True,
                'OPTIONS': {
                    'context_processors': [
                        'django.template.context_processors.debug',
                        'django.template.context_processors.request',
                        'django.contrib.auth.context_processors.auth',
                        'django.contrib.messages.context_processors.messages',
                    ],
                },
            },
        ]
        ```

        - There are third-party Template Engines like `Jinja` which can be used but preferably `'BACKEND': 'django.template.backends.django.DjangoTemplates'` is the one which should be used

## 033. Using template tags

- In this lecture, you'll learn how to pass data dynamically from `views.py` to `template.html`
- We do that in two simple steps
  - first step is to pass the data to the `render()` method, the third parameter of the `render()` method is the data which expects the data in dictionary format

    ```python
    render(request, 'template', data)
    ```

  - Once we pass the data, second step is that we can retrieve the data inside `template.html` using Template Tags that Django provides
  - The syntax for template tags is very simple, within teo flower-braces `{{ }}`, we can retrieve the data which we're sending in the dictionary format and display it on the UI
- Lets see that in action, go to your IDE, goto the `views.py` file, in `render()` method, we can pass any data in the dictionary format, so lets pass a name
as a dictionary in variable `myDict`, the third parameter in `render()` method is context which is the dictionary variable

  ```python
  def renderTemplate(request):
      myDict={"name":"Surya"}
      return render(request, 'templatesApp/firstTemplate.html', myDict)
  ```

- Now, goto the `firstTemplate.html` use the template variables in curly-braces `{{ name }}` which is same as the key from the dictionary which you've created in the view, automatically the value for that key will be taken and rendered on the UI

  ```HTML
  <!DOCTYPE html>
  <html>
      <head>
          <title>First Template</title>
      </head>
      <body>
          <h1>Templates in action from MVT!!</h1>
          {{ name }}
      </body>
  </html>
  ```

- So, it is this simple to pass data from the view to the template, as a dictionary which is the third parameter to the `render()` method and you use the template tags / template variables that Django provides
- These Django tags / Django variables are neither part of python nor a part of HTML, Django internally replaces these template variables with appropriate data on the fly

## 034. Rendering Employee Information

- In this lecture, we'll create a new view and a template that will display the employee information
- Goto `views.py`, define a new view `renderEmployee()` here, that takes a request, and inside it define a dictionary `myDict` which has `id`, `name`, `salary`, it should return the `render()` method which takes `request`, `employeeTemplate.html`, `myDict`

```python
def renderEmployee(request):
    myDict={"id":123, "name":"Johnny", "sal":10000}
    return render(request, 'templatesApp/employeeTemplate.html', myDict)
```

- Now, goto `templateApp`, create a new file `employeeTemplate.html`
  - Within this you can manually type the HTML code, or you can simply grab the HTML from the other HTML file `firstTemplate.HTML`
  - Change the title `<title>` to `Employee Information`, and within body `<body>`, you display the employee details
    - Use Template Variables to display the ID, name & salary, and put these in an ordered-list `<ol>`, so each of these will be a list-item `<li>`

  ``` HTML
  <!DOCTYPE html>
  <html>
      <head>
          <title>Employee Information</title>
      </head>
      <body>
          <ol>
              <li>ID: {{ id }}</li>
              <li>Name: {{ name }}</li>
              <li>Salary: {{ sal }}</li>
          </ol>
      </body>
  </html>
  ```

- The next step is to map this view to a URL, goto the `urls.py`, add the new URL route as `empInfo/` with view `renderEmployee` using `path()` function

  ```python
  from templatesApp import views
  urlpatterns = [
    path('admin/', admin.site.urls),
    path(route='firstTemplate/', view=views.renderTemplate),
    path(route='empInfo/', view=views.renderEmployee),
  ]
  ```

  - Save it, the changes should be automatically picked up
  - In the web-browser, enter URL `localhost:8000/empInfo`, and you'll see the employee information ID, name and salary
- Now, we have seen how to use a template from scratch, you've created a new view that sends tha employee information, and later on when you'll learn how to interact with databases, the static content will go away, so it'll be data dynamically and rendering it on to the UI

## 035. Using Static files

- asa
