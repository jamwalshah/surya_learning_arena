# 04. First Django Web Application

## 018. Create a Django Project

- You'll `Create` your very first Django project using the django-admin command-line utility
- To do that, go to your command-line on windows or terminal on mac/linux
- Go to the directory where you want to create a folder where you want to save all your Django projects

``` bash
mkdir djangoprojects
```

- once you have that folder, go into that folder

``` bash
cd djangoprojects
```

and use command

``` bash
django-admin startproject firstProject
django-admin startproject <ProjectName> # syntax
```

to create the projects, applications, etc.

- `startproject` is the option to create a project
- You may use command

``` bash
ls
```

to check the newly created project

- Now open the file explorer to locate the project folder `firstProject` which you've created just now, and drag-drop this folder in an IDE of your choice to open it as a project
- This Project folder has the following files
  1. `__init__.py`
      - it is an empty file
      - it tells the python that this folder is a package
  2. `settings.py`
      - As the name suggests, it contains all
      - the settings/configurations for the applications inside this project,
      - the middleware configuration that you'll be doing later on
      - the database configuration
      - Here you can see the installed apps list
      - when you create an application inside this project later on, you'll add that app in `INSTALLED_APPS`
      - You can also see the middleware configuration under `MIDDLEWARE`
      - You can also find `TEMPLATES`, `WSGI_APPLICATION`
      - it shows `sqlite3` in `DATABASES` as it comes with python3, when you create your application later on, it'll have sqlite in-memory database of its own
      - You can also point to MySql or Oracle by changing the configuration to the appropriate database as required
      - By default, Django projects come with sqlite database
  3. `urls.py`
      - As the name itself says, this is the file that carries the URL patterns of our projects as well as applications
      - We'll be creating several web-pages or views in our applications, each of those web-pages will have a URI that we've to configure here
      - Django comes with an in-built admin tool, so you can see `admin/` url which points to the `admin.site.urls` that Django provides
      - It also has a lot of documentation available at the top which you can read
      - You'll be learning how to configure URLs, how to use regular expressions inside them in lectures later on
  4. `wsgi.py`
      - **WSGI** stands for Web Server Gateway Interface
      - This file can be used to deploy our applications to online servers or even to the cloud
      - Typically, we use this during production deployments
  5. `manage.py`
      - we rarely mess with this file, but we'll be using this file every time we run our project, every time we run migrations for our projects once we start working with databases
      - we'll be using manage.py from the command-line / terminal to run our projects, run applications, run database migrations, and more

## 019. Run the Project

- You'll run your very first project
- To do that, goto command-line or terminal, then goto the directory of the project
- Once you're inside the project directory, make sure that you have `manage.py`, you'll need this file in order to run our project or even migrations later on
- Use the command

```bash
python3 manage.py runserver
```

which will run our Django application

- It'll run Django application using `settings.py` file, starting development server on `localhost` or `127.0.0.1` using port `8000`
- Django provides a default web-server for us and it'll launch our application on the web-server
- You may launch your web-browser, and open the URL `localhost:8000`, and you'll see the default Django application, which has references to Django documentation, Tutorial, Django Community, and more
- It'll show message as `The install worked successfully! Congratulations! You are seeing this page because DEBUG=True is in your settings file and you have not configured any URLs.`, which is fine as we have not touched any development part
- To stop this server, come to the command-line and hit `Ctrl+C`
- Notice the previous line, it logs all the incoming requests on the command line
- To run this Django server on a different port, you may run

```bash
python3 manage.py runserver 7777
python3 manage.py runserver <PortNumber> # syntax

```

- Now you need to visit the Django server on new port instead of default port in the web-browser

## 020. Create a Django App

- The next step is to `Create a Django Application` inside the `Django Project` that we've created
- Go to the command-line, stop the Django Server, make sure you're under the project directory
- To create a Django application, you need to run command

```bash
python3 manage.py startapp firstApp
python3 manage.py startapp <AppName> # syntax
```

- Now, the project directory has a folder named `firstApp`, which you can check using command

```bash
ls
```

- You may also goto your IDE to check the folder for app
- A Python Project can comprise of many applications, inside which we'll be creating models, views, etc.
- Lets go through important files here, we'll come back to migrations later on when we deal with databases

1. `__init__py`
    - a blank file with this name indicates that current folder is a python package
2. `admin.py`
    - we can register our modules in the applications inside this file and Django will use these modules with the Django admin interface
    - Django provides an administrative interface, and if you want to make the parts of your application into a part of admin interface, you can include those here, which  will be shown later on
3. `apps.py`
    - In this file, we can store all the application specific configuration
4. `models.py`
    - This is where we'll be storing our data models
    - WHatever data models we have in this file will represent the database tables pretty much
    - we'll work on these models later on, each model will have several properties inside them
    - we'll talk more about it when we'll deal with models
5. `tests.py`
    - In this file, we have application specific tests
    - For every function and class, we create the respective tests here
6. `views.py`
    - it is also one important file we'll touch in the next few lectures
    - In this file, we'll be saving all the functions or the classes that'll handle the incoming requests from the user/web-browser
    - When a request comes in, it comes from a particular view and that view will respond with an output, which will be displayed on the browser
    - So, Views is where all the HTML mode and python code lives which is responsible for rendering the UI (User Interface)

- `migrations` directory
  - This directory stores all the database specific information related to our models
  - models and views are the most important files here
  - You'll also be creating a URLs.py later on for your particular application

## 021. Create a view

- Next step is to configure our application inside the `settings.py` which is the project configuration
- in `settings.py` file, if you scroll down, you'll see all the installed apps in `INSTALLED_APPS` list
  - at the end of this list, after the comma, within single quotes, you've to specify the application name, which is `'firstApp'`
  - This tells Django that there is an Application called `firstApp` which is a part of this project
  - When this project is run, this new app should be included
- Now, goto `views.py` inside `firstApp`, and you're going to create your very first view
- There are two ways in which you can create views
  1. Class-based views
  2. Function-based views
- We'll start with Function-based views, and later on we'll discuss the Class-based views

> A view is responsible for taking a request, and sending a response back

- The very first step is to import the `HttpResponse` from `Django.http`

```python
from django.http import HttpResponse
```

- In Django, we'll take the incoming HTTP request whatever the browser sends when the user clicks a button, clicks on a link, etc., the incoming request will be wrapped inside an object and that object will be handed over to the method inside our view
- Now you create a function `display` which takes a request and returns a response, Every view takes a request and returns a HttpResponse back, whatever you'll return using the HttpResponse object will go back to the browser

```python
def display(request):
    return HttpResponse("<h1>My First Django App !!</h1>")
```

- In the next lecture, we'll configure the URL for this view so that we can run our application and see this in action

## 022. Configure URLs and Run the App

- The next step is to configure a URL to the view that we have created and run our application and test it
- The name of the view is `display()` function inside our `views.py module`
- To configure a URL to this view, goto the `urls.py` file under our project
- You already see a couple of imports here

1. we have the `admin` interface from `django.contrib` that django provides, we'll be shown later on

    ``` python
    from django.contrib import admin
    ```

2. we have the `path` from `django.urls`, using which we can configure a URL for a particular view

    ``` python
    from django.urls import path
    ```

- In `urlpatterns` list, we already have a path for the admin URL to the admin view
  - Here, add another item to the list as `path()` function call by passing the URI you want for the particular view as the `route`, and the full name of the `view` (first import the `views` from the `firstApp` application into this `urls.py` file)

  ```python
  from firstApp import views
  urlpatterns = [
    path('admin/', admin.site.urls),
    path('hello/', views.display),
  ]
  ```

- Save it, go to your command-line to run the application, make sure you're under the `firstProject` directory which has the `manage.py`
- run command, and it'll run the application on port 8000

```python
python3 manage.py runserver
```

- launch your web-browser and open `localhost:8000/hello`, which is the URL you should use, and you'll see the response coming back
- So, the request from web-browser will go to the Django server and in the command-line you'll see response coming back for the `GET` request to `/hello/` route
- When a request comes from the web-browser, it'll look for the URL/route that comes within the request and it knows from `urls.py` file that this URL/route is mapped to which view, so it'll execute that particular view from the `views.py` file, and whatever the `HttpResponse` that view returns will be sent back to the browser, which is what you're seeing in the browser

## 023. Create another view

- The `views.py` file hosts any number of views that're required for our application
- In this lecture, you'll create another view that will return the current server's date and time, when user accesses it
- In `views.py` file, lets first start with the import

```python
import datetime
```

- then define a new view `displayDateTime(request)` which receives the request from the client and it should return the `datetime`
  - then store the current `datetime` as returned by `now()` function, and then convert it into a string while appending some text to it
  - and in last statement of the view, you return the new string, which will be sent as response back to the browser

```python
def displayDateTime(request):
    dt = datetime.datetime.now()
    s = "<b>Current Date and Time: </b>"+str(dt)
return HttpResponse(content=s)
```

- The next step is to map this view to a URL, goto `urls.py`, add `path()` function call with new route `datetime/` and its view as `views.displayDateTime`

```python
urlpatterns = [
    path('admin/', admin.site.urls),
    path('hello/', views.display),
    path('datetime/', views.displayDateTime),
]
```

- save the `urls.py` file and automatically your changes will be picked up, and it'll restart the server which is the beauty of the inbuilt Django server
- Now go to the browser, instead of `localhost:8000/hello/`, we should use `localhost:8000/datetime/`, hit enter and then you'll see the recent view's response which shows the current date and time

## 024. Multiple applications in a project

- asa
